<p id="notice"><%= notice %></p>

<h1><%= link_to 'Todo Items', todo_items_path %></h1>

<table>
  <tbody>
    <tr>
      <th colspan="3">Incomplete</th>
    </tr>
    <tr>
      <th>Done?</th>
      <th>Item</th>
      <th>Description</th>
      <th>Tags</th>
    </tr>
    <% @incomplete_todo_items.each do |todo_item| %>
      <tr>
        <td><%= button_to "Complete", complete_todo_item_path(todo_item), method: :patch, remote: true %></td>
        <td><%= todo_item.title %></td>
        <td><%= todo_item.description %></td>
        <td><%=raw todo_item.tags.present? ? todo_item.tags.map(&:name).map { |t| link_to t, tag_path(t) }.join(', ') : 'No Tags' %></td>
        <td><%= link_to 'Show', todo_item %></td>
        <td><%= link_to 'Edit', edit_todo_item_path(todo_item) %></td>
        <td><%= link_to 'Destroy', todo_item, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
  <tbody>
    <tr>
      <th colspan="3">Complete</th>
    </tr>
    <tr>
      <th>Done?</th>
      <th>Item</th>
      <th>Description</th>
      <th>Tags</th>
    <% @complete_todo_items.each do |todo_item| %>
      <tr>
        <td><%= button_to "Uncomplete", uncomplete_todo_item_path(todo_item), method: :patch, remote: true %></td>
        <td><%= todo_item.title %></td>
        <td><%= todo_item.description %></td>
        <td><%=raw todo_item.tags.present? ? todo_item.tags.map(&:name).map { |t| link_to t, tag_path(t) }.join(', ') : 'No Tags' %></td>
        <td><%= link_to 'Show', todo_item %></td>
        <td><%= link_to 'Edit', edit_todo_item_path(todo_item) %></td>
        <td><%= link_to 'Destroy', todo_item, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>

</table>

<br>
<%= link_to 'Delete Completed Items', destroy_completed_todo_items_path, method: :delete, data: { confirm: 'Are you sure?' } %>
<%= link_to 'New Todo Item', new_todo_item_path %>
